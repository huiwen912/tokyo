<!DOCTYPE html>
<html lang="zh-TW">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>2026 æ±äº¬å†¬æ—¥è¦ªå­è‡ªé§•ä¹‹æ—…</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
    <link href="https://fonts.googleapis.com/css2?family=Noto+Sans+TC:wght@300;400;500;700&display=swap" rel="stylesheet">
    <style>
        body {
            font-family: 'Noto Sans TC', sans-serif;
            background-color: #f8fafc;
            scroll-behavior: smooth;
        }
        .snow-bg {
            background: linear-gradient(to bottom, #e0f2fe, #ffffff);
        }
        .fuji-gradient {
            background: linear-gradient(135deg, #1e3a8a 0%, #3b82f6 100%);
        }
        .timeline-item::before {
            content: '';
            position: absolute;
            left: -9px;
            top: 0;
            width: 18px;
            height: 18px;
            background-color: #3b82f6;
            border-radius: 50%;
            border: 4px solid #fff;
            z-index: 10;
        }
        .timeline-line {
            position: absolute;
            left: 0;
            top: 0;
            bottom: 0;
            width: 2px;
            background-color: #e2e8f0;
        }
        .card-hover:hover {
            transform: translateY(-5px);
            transition: all 0.3s ease;
        }
        .filter-btn.active {
            background-color: #3b82f6;
            color: white;
        }
        /* AI Assistant Styles */
        #ai-sidebar {
            transition: transform 0.3s ease-in-out;
            transform: translateX(100%);
        }
        #ai-sidebar.open {
            transform: translateX(0);
        }
        .dot-pulse {
            animation: pulse 1.5s infinite;
        }
        @keyframes pulse {
            0%, 100% { opacity: 1; }
            50% { opacity: 0.4; }
        }
    </style>
</head>
<body class="text-slate-800">

    <!-- é ‚éƒ¨å°è¦½åˆ— -->
    <nav class="fixed top-0 w-full bg-white/80 backdrop-blur-md shadow-sm z-50">
        <div class="max-w-7xl mx-auto px-4">
            <div class="flex justify-between items-center h-16">
                <div class="text-xl font-bold text-blue-600 flex items-center">
                    â„ï¸ æ±äº¬ 2026 è¦ªå­è‡ªé§•
                </div>
                <div class="hidden md:flex space-x-6 items-center">
                    <a href="#overview" class="hover:text-blue-500 transition">è¡Œç¨‹ç¸½è¦½</a>
                    <a href="#transport" class="hover:text-blue-500 transition">äº¤é€šä½å®¿</a>
                    <a href="#itinerary" class="hover:text-blue-500 transition">æ¯æ—¥è¡Œç¨‹</a>
                    <a href="#food" class="hover:text-blue-500 transition">ç¾é£Ÿåœ°åœ–</a>
                    <button onclick="toggleAISidebar()" class="bg-blue-600 text-white px-4 py-2 rounded-full text-sm font-bold shadow-lg hover:bg-blue-700 transition flex items-center gap-2">
                        âœ¨ æ™ºæ…§é¡§å•
                    </button>
                </div>
            </div>
        </div>
    </nav>

    <!-- Hero å€å¡Š -->
    <header class="pt-32 pb-20 px-4 snow-bg text-center relative overflow-hidden">
        <div class="max-w-4xl mx-auto relative z-10">
            <h1 class="text-4xl md:text-6xl font-bold text-slate-900 mb-6">å†¬æ—¥å¯Œå£«ï¼æ±äº¬è¦ªå­å‡æœŸ</h1>
            <p class="text-lg md:text-xl text-slate-600 mb-8">2026/01/11 - 01/18 | 2å¤§1å° (å‡±å‡±) | å­•åª½å’ªå‹å–„è¡Œç¨‹</p>
            <div class="flex justify-center flex-wrap gap-4">
                <span class="bg-blue-100 text-blue-700 px-4 py-2 rounded-full text-sm font-medium">å…¨ç¨‹è‡ªé§•</span>
                <span class="bg-blue-100 text-blue-700 px-4 py-2 rounded-full text-sm font-medium">æ·ºè‰é€£ä½</span>
                <span class="bg-pink-100 text-pink-700 px-4 py-2 rounded-full text-sm font-medium">åš´ç¦ç‰›è‚‰</span>
                <button onclick="generateDietaryCard()" class="bg-white border border-pink-200 text-pink-600 px-4 py-2 rounded-full text-sm font-bold shadow-sm hover:bg-pink-50 transition">
                    âœ¨ ç”Ÿæˆä¸åƒç‰›æºé€šå¡
                </button>
            </div>
        </div>
    </header>

    <!-- è¡Œç¨‹ç¸½è¦½èˆ‡åœ–è¡¨ -->
    <section id="overview" class="py-16 max-w-7xl mx-auto px-4">
        <h2 class="text-3xl font-bold text-center mb-12">ğŸ“Š æ—…ç¨‹æ•¸æ“šåˆ†æ</h2>
        <div class="grid grid-cols-1 lg:grid-cols-2 gap-12 items-center">
            <div class="bg-white p-6 rounded-2xl shadow-lg">
                <h3 class="text-xl font-bold mb-4 text-center">æ¯æ—¥é ä¼°é§•é§›æ™‚æ•¸ (å°æ™‚)</h3>
                <canvas id="travelChart" height="250"></canvas>
            </div>
            <div class="space-y-6">
                <div class="bg-blue-50 p-6 rounded-2xl">
                    <h3 class="font-bold text-lg mb-2 text-blue-800">ğŸ“… èˆªç­è³‡è¨Š</h3>
                    <div class="flex justify-between text-sm md:text-base">
                        <div>
                            <p class="font-bold">å»ç¨‹ CI104</p>
                            <p>1/11 12:35 TPE â” 16:35 NRT</p>
                        </div>
                        <div class="text-right">
                            <p class="font-bold">å›ç¨‹ CI109</p>
                            <p>1/18 19:30 NRT â” 22:45 TPE</p>
                        </div>
                    </div>
                </div>
                <div class="grid grid-cols-2 gap-4 text-center">
                    <div class="bg-white p-4 rounded-xl shadow-sm border border-slate-100">
                        <p class="text-slate-500 text-sm">ä½å®¿é»</p>
                        <p class="text-xl font-bold text-blue-600">æ·ºè‰ Minn</p>
                    </div>
                    <div class="bg-white p-4 rounded-xl shadow-sm border border-slate-100">
                        <p class="text-slate-500 text-sm">äº¤é€šå·¥å…·</p>
                        <p class="text-xl font-bold text-blue-600">8æ—¥ç§Ÿè»Š</p>
                    </div>
                </div>
            </div>
        </div>
    </section>

    <!-- æ¯æ—¥è¡Œç¨‹ -->
    <section id="itinerary" class="py-16 max-w-5xl mx-auto px-4">
        <h2 class="text-3xl font-bold text-center mb-12">ğŸ—“ï¸ 8æ—¥ç²¾é¸è¡Œç¨‹</h2>
        
        <!-- Day 2 Example with AI Feature -->
        <div class="mb-12">
            <div class="flex items-center justify-between mb-6">
                <div class="flex items-center space-x-4">
                    <span class="bg-blue-600 text-white px-4 py-1 rounded-lg font-bold">Day 2</span>
                    <span class="text-xl font-medium">1/12 (ä¸€) æ±Ÿæˆ¶å·è¦ªå­æ—¥</span>
                </div>
                <button onclick="askAIFacts('æ±Ÿæˆ¶å·è‡ªç„¶å‹•ç‰©åœ’å’Œæ‘©å¤©è¼ª')" class="text-xs bg-indigo-50 text-indigo-600 px-3 py-1 rounded-full border border-indigo-100 hover:bg-indigo-100 transition">
                    âœ¨ æ™¯é»è¶£èåˆ†äº«
                </button>
            </div>
            <div class="relative ml-4 pl-8">
                <div class="timeline-line"></div>
                <div class="timeline-item relative mb-8">
                    <p class="text-sm font-bold text-blue-600">09:30</p>
                    <p class="font-bold">ç¯ å´å°é¦¬æ¨‚åœ’</p>
                    <p class="text-sm text-slate-500 italic">å‡±å‡±é«”é©—é¨é¦¬ï¼Œå­•åª½å’ªåœ¨æ—ä¼‘æ¯æ‹ç…§</p>
                </div>
                <div class="timeline-item relative mb-8">
                    <p class="text-sm font-bold text-blue-600">11:00</p>
                    <p class="font-bold">æ±Ÿæˆ¶å·è‡ªç„¶å‹•ç‰©åœ’</p>
                </div>
                <div class="timeline-item relative mb-8">
                    <p class="text-sm font-bold text-blue-600">13:00</p>
                    <p class="font-bold">è‘›è¥¿è‡¨æµ·æ°´æ—åœ’ & å¤§æ‘©å¤©è¼ª</p>
                </div>
                <div class="timeline-item relative">
                    <p class="text-sm font-bold text-blue-600">17:30</p>
                    <p class="font-bold text-orange-600">æ™šé¤ï¼šç›¸æ’²èŒ¶å±‹ å¯ºå°¾ (å…©åœ‹)</p>
                </div>
            </div>
        </div>

        <!-- Day 3 Example with AI Feature -->
        <div class="mb-12">
            <div class="flex items-center justify-between mb-6">
                <div class="flex items-center space-x-4">
                    <span class="bg-orange-500 text-white px-4 py-1 rounded-lg font-bold">Day 3</span>
                    <span class="text-xl font-medium">1/13 (äºŒ) çˆ¸çˆ¸ç”Ÿæ—¥ï¼å¯Œå£«çµ•æ™¯</span>
                </div>
                <button onclick="askAIFacts('å¯Œå£«å±±å’Œå¤©ä¸Šå±±å…¬åœ’çš„ç‹¸è²“æ•…äº‹')" class="text-xs bg-indigo-50 text-indigo-600 px-3 py-1 rounded-full border border-indigo-100 hover:bg-indigo-100 transition">
                    âœ¨ è¬›å€‹æ•…äº‹çµ¦å‡±å‡±è½
                </button>
            </div>
            <div class="relative ml-4 pl-8">
                <div class="timeline-line"></div>
                <div class="timeline-item relative mb-8">
                    <p class="text-sm font-bold text-blue-600">10:00</p>
                    <p class="font-bold">æ²³å£æ·ºé–“ç¥ç¤¾ (å¤©ç©ºé³¥å±…)</p>
                </div>
                <div class="timeline-item relative mb-8">
                    <p class="text-sm font-bold text-blue-600">14:00</p>
                    <p class="font-bold">å¤©ä¸Šå±±å…¬åœ’å…¨æ™¯çºœè»Š</p>
                </div>
            </div>
        </div>

        <!-- æŸ¥çœ‹æ›´å¤šè¡Œç¨‹ -->
        <div class="grid grid-cols-1 md:grid-cols-2 gap-4 mt-8">
            <div class="bg-white p-4 rounded-xl border-l-4 border-blue-400 shadow-sm flex justify-between items-center">
                <div>
                    <p class="font-bold text-sm">Day 4: åŸ¼ç‰éµé“ä¹‹æ—…</p>
                    <p class="text-xs text-slate-500">å¤§å®®éµé“åš â” æ¡è‰è“ â” è Ÿç­†å°æ–°</p>
                </div>
                <button onclick="askAIFacts('å¤§å®®éµé“åšç‰©é¤¨')" class="text-[10px] bg-blue-50 text-blue-600 px-2 py-1 rounded-full">âœ¨ è¶£è</button>
            </div>
            <div class="bg-white p-4 rounded-xl border-l-4 border-blue-400 shadow-sm flex justify-between items-center">
                <div>
                    <p class="font-bold text-sm">Day 5: å‰åœåŠ›å¹»æƒ³æ—¥</p>
                    <p class="text-xs text-slate-500">å‰åœåŠ› â” å¤šæ‘©å…­éƒ½ç§‘å­¸é¤¨</p>
                </div>
                <button onclick="askAIFacts('å‰åœåŠ›ç¾è¡“é¤¨çš„é¾è²“å·´å£«')" class="text-[10px] bg-blue-50 text-blue-600 px-2 py-1 rounded-full">âœ¨ è¶£è</button>
            </div>
        </div>
    </section>

    <!-- ç¾é£Ÿåœ°åœ– -->
    <section id="food" class="py-16 bg-slate-50">
        <div class="max-w-7xl mx-auto px-4 text-center">
            <h2 class="text-3xl font-bold mb-4">ğŸ½ï¸ éç‰›è‚‰ç¾é£Ÿåœ°åœ–</h2>
            <button onclick="askAISuggestion('è«‹æ¨è–¦æ·ºè‰é™„è¿‘æ›´å¤šä¸å«ç‰›è‚‰çš„è¦ªå­å‹å–„é¤é£²')" class="mb-8 inline-flex items-center gap-2 bg-white text-blue-600 px-6 py-2 rounded-full border border-blue-100 shadow-sm hover:shadow-md transition font-bold">
                âœ¨ è®“ AI æ¨è–¦æ›´å¤šç„¡ç‰›ç¾é£Ÿ
            </button>
            
            <div class="flex justify-center flex-wrap gap-2 mb-10">
                <button onclick="filterFood('all')" class="filter-btn active px-6 py-2 rounded-full border border-blue-400 font-medium">å…¨éƒ¨</button>
                <button onclick="filterFood('seafood')" class="filter-btn px-6 py-2 rounded-full border border-blue-400 font-medium">æµ·é®®/ç«é‹</button>
                <button onclick="filterFood('pork')" class="filter-btn px-6 py-2 rounded-full border border-blue-400 font-medium">è±¬è‚‰/ä¸¼é£¯</button>
            </div>
            
            <div id="foodGrid" class="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6 text-left">
                <!-- é¤å»³è³‡æ–™ä¿æŒåŸæ¨£ -->
                <div class="food-card bg-white rounded-2xl shadow-sm p-6" data-type="seafood">
                    <span class="bg-blue-100 text-blue-600 text-xs px-2 py-1 rounded">æµ·é®®/ç«é‹</span>
                    <h3 class="text-xl font-bold mt-2">ç›¸æ’²èŒ¶å±‹ å¯ºå°¾</h3>
                    <p class="text-slate-600 text-sm my-3 italic">æ¨è–¦ï¼šé›è‚‰ä¸¸ç›¸æ’²ç«é‹</p>
                    <a href="https://www.google.com/maps/search/?api=1&query=Chanko+Terao+Ryogoku" target="_blank" class="text-blue-500 text-sm font-bold">Google Maps â†’</a>
                </div>
                <div class="food-card bg-white rounded-2xl shadow-sm p-6" data-type="pork">
                    <span class="bg-green-100 text-green-600 text-xs px-2 py-1 rounded">è±¬è‚‰/ä¸¼é£¯</span>
                    <h3 class="text-xl font-bold mt-2">åå‹äº­ è±šä¸¼</h3>
                    <p class="text-slate-600 text-sm my-3 italic">æ¨è–¦ï¼šç‚­çƒ¤è±¬è‚‰è“‹é£¯</p>
                    <a href="https://www.google.com/maps/search/?api=1&query=åå‹äº­+æ˜¥æ—¥éƒ¨" target="_blank" class="text-blue-500 text-sm font-bold">Google Maps â†’</a>
                </div>
            </div>
        </div>
    </section>

    <!-- AI æ™ºæ…§é¡§å•å´é‚Šæ¬„ -->
    <div id="ai-sidebar" class="fixed top-0 right-0 h-full w-full md:w-96 bg-white shadow-2xl z-[60] flex flex-col">
        <div class="p-6 fuji-gradient text-white flex justify-between items-center">
            <div>
                <h3 class="text-xl font-bold">âœ¨ AI æ—…éŠé¡§å•</h3>
                <p class="text-xs opacity-80">å°ˆç‚ºå‡±å‡±ä¸€å®¶è¨­è¨ˆçš„æ™ºæ…§åŠ©æ‰‹</p>
            </div>
            <button onclick="toggleAISidebar()" class="text-white text-2xl">&times;</button>
        </div>
        <div id="ai-messages" class="flex-1 overflow-y-auto p-6 space-y-4 bg-slate-50 text-sm">
            <div class="bg-blue-100 p-3 rounded-lg text-blue-800">
                æ‚¨å¥½ï¼æˆ‘æ˜¯æ‚¨çš„æ—…éŠé¡§å•ã€‚æœ‰é—œæ–¼é€™ 8 å¤©è¡Œç¨‹çš„ä»»ä½•ç–‘å•ï¼Œæˆ–éœ€è¦å³æ™‚å»ºè­°ï¼ˆå¦‚å¤©æ°£å°ç­–ã€æ›´å¤šç¾é£Ÿæ¨è–¦ï¼‰ï¼Œéƒ½å¯ä»¥å•æˆ‘å–”ï¼
            </div>
        </div>
        <div class="p-4 border-t bg-white">
            <div class="flex gap-2">
                <input type="text" id="ai-input" placeholder="å•å•é¡§å•..." class="flex-1 border rounded-full px-4 py-2 focus:outline-none focus:ring-2 focus:ring-blue-500">
                <button onclick="sendMessage()" class="bg-blue-600 text-white p-2 rounded-full hover:bg-blue-700">
                    <svg class="w-5 h-5" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="ArrowUp"></path><path d="M5 10l7-7m0 0l7 7m-7-7v18" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"/></svg>
                </button>
            </div>
        </div>
    </div>

    <!-- AI æºé€šå¡ Modal -->
    <div id="modal-backdrop" class="fixed inset-0 bg-black/50 z-[100] hidden items-center justify-center p-4">
        <div class="bg-white rounded-3xl p-8 max-w-sm w-full shadow-2xl relative">
            <button onclick="closeModal()" class="absolute top-4 right-4 text-slate-400">&times;</button>
            <div id="modal-content" class="text-center">
                <!-- AI Content will be injected here -->
            </div>
        </div>
    </div>

    <!-- é å°¾ -->
    <footer class="py-12 bg-slate-900 text-slate-400 text-center">
        <p class="mb-4">ç¥å‡±å‡±å®¶ 2026 æ±äº¬ä¹‹æ—…åœ“æ»¿é †åˆ©ï¼â„ï¸</p>
        <p class="text-xs">Powered by Gemini 2.5 AI | Professional Travel Planning</p>
    </footer>

    <script>
        const apiKey = "";
        const appId = typeof __app_id !== 'undefined' ? __app_id : 'tokyo-trip-2026';

        // Gemini API å‘¼å«å‡½æ•¸ (å«é‡è©¦æ©Ÿåˆ¶)
        async function callGemini(prompt, systemInstruction = "") {
            const url = `https://generativelanguage.googleapis.com/v1beta/models/gemini-2.5-flash-preview-09-2025:generateContent?key=${apiKey}`;
            const payload = {
                contents: [{ parts: [{ text: prompt }] }],
                systemInstruction: { parts: [{ text: systemInstruction }] }
            };

            let delay = 1000;
            for (let i = 0; i < 5; i++) {
                try {
                    const response = await fetch(url, {
                        method: 'POST',
                        headers: { 'Content-Type': 'application/json' },
                        body: JSON.stringify(payload)
                    });
                    if (!response.ok) throw new Error('API Error');
                    const data = await response.json();
                    return data.candidates?.[0]?.content?.parts?.[0]?.text;
                } catch (error) {
                    if (i === 4) throw error;
                    await new Promise(resolve => setTimeout(resolve, delay));
                    delay *= 2;
                }
            }
        }

        // AI å´é‚Šæ¬„æ§åˆ¶
        function toggleAISidebar() {
            document.getElementById('ai-sidebar').classList.toggle('open');
        }

        async function sendMessage() {
            const input = document.getElementById('ai-input');
            const text = input.value.trim();
            if (!text) return;

            addMessage(text, 'user');
            input.value = '';

            const loadingId = addMessage('æ­£åœ¨æ€è€ƒä¸­...', 'ai', true);
            
            const systemPrompt = "ä½ æ˜¯ä¸€ä½å°ˆæ¥­çš„æ±äº¬æ—…éŠè¦åŠƒå¸«ã€‚ç¾åœ¨ä½ æ­£åœ¨ç‚ºå‡±å‡±ä¸€å®¶ï¼ˆ2å¤§1å°ï¼Œå«å­•å©¦èˆ‡4æ­²ç”·ç«¥ï¼‰æä¾›å»ºè­°ã€‚é€™ä»½è¡Œç¨‹æ˜¯ 8 å¤© 7 å¤œï¼Œä½å®¿åœ¨æ·ºè‰ Minnï¼Œå…¨ç¨‹è‡ªé§•ã€‚æœ€é‡è¦çš„è¦å‰‡æ˜¯ï¼šçˆ¸çˆ¸åª½åª½çµ•å°ä¸åƒç‰›è‚‰ã€‚è«‹åŸºæ–¼é€™äº›èƒŒæ™¯æä¾›æº«æš–ã€å¯¦ç”¨ä¸”å®‰å…¨çš„å»ºè­°ã€‚";
            
            try {
                const response = await callGemini(text, systemPrompt);
                removeLoading(loadingId);
                addMessage(response, 'ai');
            } catch (error) {
                removeLoading(loadingId);
                addMessage('æŠ±æ­‰ï¼Œé¡§å•æš«æ™‚é€£ä¸ä¸Šç·šï¼Œè«‹ç¨å¾Œå†è©¦ã€‚', 'ai');
            }
        }

        function addMessage(text, sender, isLoading = false) {
            const container = document.getElementById('ai-messages');
            const div = document.createElement('div');
            div.className = sender === 'user' ? 'bg-blue-600 text-white p-3 rounded-lg ml-8 self-end' : 'bg-white p-3 rounded-lg mr-8 shadow-sm border border-slate-100 self-start';
            if (isLoading) div.classList.add('dot-pulse');
            div.innerText = text;
            const id = 'msg-' + Date.now();
            div.setAttribute('id', id);
            container.appendChild(div);
            container.scrollTop = container.scrollHeight;
            return id;
        }

        function removeLoading(id) {
            const el = document.getElementById(id);
            if (el) el.remove();
        }

        // âœ¨ æ™¯é»æ·±åº¦è§£æ
        async function askAIFacts(location) {
            openModal('<p class="text-blue-600 animate-pulse">æ­£åœ¨ç‚ºå‡±å‡±æ¢ç´¢æœ‰è¶£çš„å°æ•…äº‹...</p>');
            const prompt = `è«‹é‡å°ã€Œ${location}ã€é€™å€‹æ™¯é»ï¼Œæä¾› 2-3 å€‹é©åˆè¬›çµ¦ 4 æ­²å°å­©è½çš„æœ‰è¶£å°çŸ¥è­˜æˆ–æ•…äº‹ã€‚èªæ°£è¦è¦ªåˆ‡ã€åƒåœ¨èªªæ•…äº‹ã€‚`;
            const systemPrompt = "ä½ æ˜¯ä¸€ä½èªªæ•…äº‹é«˜æ‰‹ï¼Œå°ˆé–€ç‚ºå°å­©è§£é‡‹æ™¯é»è¶£èã€‚";
            
            try {
                const response = await callGemini(prompt, systemPrompt);
                openModal(`
                    <h3 class="text-xl font-bold mb-4">âœ¨ ${location} çš„å°ç§˜å¯†</h3>
                    <div class="text-left text-slate-600 space-y-4 leading-relaxed">
                        ${response.split('\n').map(line => `<p>${line}</p>`).join('')}
                    </div>
                    <button onclick="closeModal()" class="mt-8 bg-blue-600 text-white px-6 py-2 rounded-full font-bold">æˆ‘çŸ¥é“äº†ï¼</button>
                `);
            } catch (error) {
                openModal('<p class="text-red-500">æŠ±æ­‰ï¼Œæ•…äº‹æ›¸è¢«é¢¨å¹äº‚äº†ï¼Œè«‹å†è©¦ä¸€æ¬¡ã€‚</p>');
            }
        }

        // âœ¨ æ—¥æ–‡æºé€šå°å¹«æ‰‹
        async function generateDietaryCard() {
            openModal('<p class="text-pink-600 animate-pulse">æ­£åœ¨è£½ä½œæ—¥æ–‡æºé€šå­—å¡...</p>');
            const prompt = "è«‹è£½ä½œä¸€ä»½æ—¥æ–‡æºé€šå­—å¡ã€‚å…§å®¹ï¼šæˆ‘å€‘æœ‰å…©ä½å¤§äººä¸åƒç‰›è‚‰ï¼ˆåŒ…æ‹¬è‚‰å¡Šã€é«˜æ¹¯ã€ç‰›æ²¹ã€é†¬æ±ï¼‰ã€‚æˆ‘å€‘æœ‰ä¸€ä½å­•å©¦ã€‚è«‹ç”¨æœ‰ç¦®è²Œä¸”æ¸…æ™°çš„æ—¥æ–‡è¡¨é”ï¼Œä¸¦é™„ä¸Šä¸­æ–‡å°ç…§ã€‚";
            
            try {
                const response = await callGemini(prompt, "ä½ æ˜¯ä¸€ä½å°ˆæ¥­ç¿»è­¯ï¼Œæ“…é•·æ—¥æœ¬é¤å»³é»é¤æºé€šã€‚");
                openModal(`
                    <div class="bg-pink-50 p-6 rounded-2xl border-2 border-pink-200">
                        <h3 class="text-xl font-bold text-pink-700 mb-4">é£²é£Ÿéœ€æ±‚æºé€šå¡</h3>
                        <div class="text-left text-lg font-medium leading-relaxed mb-6">
                            ${response.replace(/\n/g, '<br>')}
                        </div>
                        <p class="text-xs text-slate-400">è«‹ç›´æ¥å‘é¤å»³äººå“¡å‡ºç¤ºæ­¤ç•«é¢</p>
                    </div>
                    <button onclick="closeModal()" class="mt-6 text-slate-500 underline">é—œé–‰</button>
                `);
            } catch (error) {
                openModal('<p class="text-red-500">å­—å¡è£½ä½œå¤±æ•—ï¼Œè«‹æª¢æŸ¥ç¶²è·¯é€£ç·šã€‚</p>');
            }
        }

        // âœ¨ æ™ºæ…§é¤é»å»ºè­°
        async function askAISuggestion(query) {
            toggleAISidebar();
            const input = document.getElementById('ai-input');
            input.value = query;
            sendMessage();
        }

        // Modal æ§åˆ¶
        function openModal(content) {
            const backdrop = document.getElementById('modal-backdrop');
            const inner = document.getElementById('modal-content');
            inner.innerHTML = content;
            backdrop.classList.remove('hidden');
            backdrop.classList.add('flex');
        }

        function closeModal() {
            const backdrop = document.getElementById('modal-backdrop');
            backdrop.classList.add('hidden');
            backdrop.classList.remove('flex');
        }

        // åˆå§‹åŒ–åœ–è¡¨
        window.onload = function() {
            const ctx = document.getElementById('travelChart').getContext('2d');
            new Chart(ctx, {
                type: 'bar',
                data: {
                    labels: ['D1', 'D2', 'D3', 'D4', 'D5', 'D6', 'D7', 'D8'],
                    datasets: [{
                        label: 'é ä¼°é§•é§›æ™‚æ•¸ (H)',
                        data: [1.5, 1, 4, 3, 1.5, 3.5, 1, 1.5],
                        backgroundColor: '#3b82f6',
                        borderRadius: 8,
                    }]
                },
                options: {
                    responsive: true,
                    maintainAspectRatio: false,
                    scales: { y: { beginAtZero: true, max: 5 } },
                    plugins: { legend: { display: false } }
                }
            });
        };

        // ç¾é£Ÿéæ¿¾åŠŸèƒ½
        function filterFood(category) {
            const cards = document.querySelectorAll('.food-card');
            const btns = document.querySelectorAll('.filter-btn');
            btns.forEach(btn => btn.classList.remove('active'));
            event.target.classList.add('active');
            cards.forEach(card => {
                if (category === 'all' || card.getAttribute('data-type') === category) {
                    card.style.display = 'block';
                } else {
                    card.style.display = 'none';
                }
            });
        }
    </script>
</body>
</html>